<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Standard Paint Estimator</title>
  <script src="https://js.paystack.co/v1/inline.js"></script>
  <style>
    body { background: #121212; color: #fff; font-family: Arial, sans-serif; padding: 20px; }
    h1, h2 { color: #ffcc00; }
    input, button { padding: 10px; margin: 5px 0; width: 100%; }
    button { background: #ffcc00; border: none; color: #000; font-weight: bold; cursor: pointer; }
    button:hover { background: #e6b800; }
    .hidden { display: none; }
    .room-card { border: 1px solid #444; padding: 10px; margin-top: 10px; border-radius: 5px; }
  </style>
</head>
<body>

  <h1>Standard Paint Estimator</h1>

  <!-- Step 1: Room Entry -->
  <div id="room-entry">
    <h2>Enter Room Details</h2>
    <label>Room Name:</label>
    <input type="text" id="roomName" placeholder="e.g., Living Room">
    <label>Length (m):</label>
    <input type="number" id="length" placeholder="Length in meters">
    <label>Width (m):</label>
    <input type="number" id="width" placeholder="Width in meters">
    <label>Height (m):</label>
    <input type="number" id="height" placeholder="Height in meters">
    <button onclick="saveRoomData()">Save Room Data</button>
    <button onclick="goToPreview()">Preview Quotation</button>
  </div>

  <!-- Step 2: Preview -->
  <div id="preview" class="hidden">
    <h2>Quotation Preview</h2>
    <div id="roomList"></div>
    <h3>Total Paint Required: <span id="totalPaint">0</span> Litres</h3>
    <button onclick="requestQuotation()">Request Quotation (KES 10)</button>
    <button onclick="backToEntry()">Add More Rooms</button>
  </div>

  <script>
    let rooms = [];

    function saveRoomData() {
      const name = document.getElementById('roomName').value.trim();
      const length = parseFloat(document.getElementById('length').value);
      const width = parseFloat(document.getElementById('width').value);
      const height = parseFloat(document.getElementById('height').value);

      if (!name || isNaN(length) || isNaN(width) || isNaN(height)) {
        alert("Please enter valid room details");
        return;
      }

      const wallArea = 2 * height * (length + width);
      const paintRequired = (wallArea / 10).toFixed(2); // 1 litre covers 10mÂ²

      rooms.push({ name, length, width, height, paintRequired });

      document.getElementById('roomName').value = '';
      document.getElementById('length').value = '';
      document.getElementById('width').value = '';
      document.getElementById('height').value = '';

      alert("Room saved successfully!");
    }

    function goToPreview() {
      if (rooms.length === 0) {
        alert("Please add at least one room first.");
        return;
      }
      document.getElementById('room-entry').classList.add('hidden');
      document.getElementById('preview').classList.remove('hidden');
      updatePreview();
    }

    function backToEntry() {
      document.getElementById('preview').classList.add('hidden');
      document.getElementById('room-entry').classList.remove('hidden');
    }

    function updatePreview() {
      const roomList = document.getElementById('roomList');
      roomList.innerHTML = '';
      let totalPaint = 0;

      rooms.forEach((room, index) => {
        totalPaint += parseFloat(room.paintRequired);
        roomList.innerHTML += `
          <div class="room-card">
            <strong>${room.name}</strong><br>
            Dimensions: ${room.length}m x ${room.width}m x ${room.height}m<br>
            Paint Required: ${room.paintRequired} Litres
          </div>
        `;
      });

      document.getElementById('totalPaint').textContent = totalPaint.toFixed(2);
    }

    function requestQuotation() {
      let handler = PaystackPop.setup({
        key: 'pk_live_e440f2ef3197a5e86a27bef5c97c388bd6c35bf4', // Live Paystack key
        email: 'customer@example.com',
        amount: 10 * 100, // 10 KES in kobo
        currency: 'KES',
        callback: function(response) {
          alert('Payment successful. Transaction ref is ' + response.reference);
        },
        onClose: function() {
          alert('Transaction was not completed.');
        }
      });
      handler.openIframe();
    }
  </script>

</body>
</html>